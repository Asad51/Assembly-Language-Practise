TITLE Reverse String Using Stack
.MODEL SMALL
.STACK 100H
.DATA
    CR EQU 0DH
    LF EQU 0AH
    MSG1 DB 'Enter a string : ',CR,LF,'$'
    MSG2 DB CR,LF,'First Capital : ','$'
    MSG3 DB CR,LF,'Last Capital : ','$'
    MSG4 DB CR,LF,'No Capitals.$'
    FIRST DB '['
    LAST DB '@'

.CODE
MAIN PROC
    MOV AX,@DATA
    MOV DS,AX

    LEA DX,MSG1
    MOV AH,9
    INT 21H

PROCESS:
	MOV AH,1
	INT 21H
	CMP AL,CR
	JE CHECK_CAPITALS

	CMP AL,'A'
	JL PROCESS
	CMP AL,'Z'
	JG PROCESS

	CMP AL,FIRST
	JG CHECK_LAST

	MOV FIRST,AL

CHECK_LAST:
	CMP AL,LAST
	JL PROCESS
	MOV LAST,AL
	JMP PROCESS

CHECK_CAPITALS:
	CMP FIRST,'['
	JE NO_CAPITALS

	LEA DX,MSG2
	MOV AH,9
	INT 21H
	MOV AH,2
	MOV DL,FIRST
	INT 21H

	LEA DX,MSG3
	MOV AH,9
	INT 21H
	MOV AH,2
	MOV DL,LAST
	INT 21H

	JMP EXIT

NO_CAPITALS:
	LEA DX,MSG4
	MOV AH,9
	INT 21H

EXIT:
	MOV AH,4CH
	INT 21H

MAIN ENDP
END MAIN